- name: Installing Remo repo 
  command: dnf install -y https://rpms.remirepo.net/enterprise/remi-release-8.rpm
  args:  
    warn: no
    creates: /etc/yum.repos.d/remi-safe.repo


- import_tasks: clean_php.yml
  when: reinstall_php | default('false')


- name: Installing System PHP
  dnf:
    name: "{{ php_packages }}"
    enablerepo: "php:remi-{{ system_php }}"
    state: latest


- name: Installing Secondary PHP
  dnf:
    name: "{{ secondary_php_packages }}"
    state: latest
  when: item.install
  loop: "{{ secondary_php }}"  


- import_tasks: configs.yml
